---
layout: post
title : SSH
author: MÃ©gane Vilain
category: Linux
---

SSH (Secure Shell) is used for managing networks, operation systems, and congigurations.
SSH keys ressemble passwords, they grant access and control who can access what. Technically the keys are cryptographic keys using a public key cryptosystem. However, functionally they are authentication credentials and need to be managed as such.

Authorized keys are public keys that grant access. They are analogous to locks that the corresponding private key can open.

## Generating a key

```sh
ssh-keygen -t ed25519 -C "your_email@example.com"
```

If invoked without any arguments, ssh-keygen will generate an RSA key.


|Argumant|Info |
|---|---|
|-t | Type of key to create (dsa, ecdsa, ecdsa-sk, ed25519, ed25519-sk, rsa|
|-C | Comment |
|-N | Passphrase |
|-f | Specifies the filename of the key file|


This command will generate two files, a private and a public key. 

### authorized_keys
In order to connect to a system, you need to add your public key to the **authorized_keys** file on that system <br>
Private keys should never be shared with anyone.

Example of authorized_keys file                                  

```
# Comments allowed at start of line
ssh-rsa AAAAB3Nza...LiPk== user@example.net 
from="*.sales.example.net,!pc.sales.example.net" ssh-rsa AAAAB2...19Q== john@example.net
command="dump /home",no-pty,no-port-forwarding ssh-dss AAAAC3...51R== example.net
permitopen="192.0.2.1:80",permitopen="192.0.2.2:25" ssh-dss AAAAB5...21S==
ssh-rsa AAAA...==jane@example.net
zos-key-ring-label="KeyRingOwner/SSHAuthKeysRing uniq-ssh-rsa"
from="*.example.com",zos-key-ring-label="KeyRingOwner/SSHAuthKeysRing uniq-ssh-dsa"
```

You should use the command ssh-copy-id to copy your public key directly in the authorized_keys file

```bash
ssh-copy-id user@host -p port 
```


## ssh-agent

Helper programm that keeps track of user's identity keys and their passphrases.
The agent can then use the keys to log into other servers without having the user type in a password or passphrase again. This implements a form of single sign-on (SSO).

The ssh-add command is used for adding identities to the agent. In the simplest form, just run if without argument to add the default files ~/.ssh/id_rsa, .ssh/id_dsa, ~/.ssh/id_ecdsa, ~/.ssh/id_ed25519, and ~/.ssh/identity. Otherwise, give it the name of the private key file to add as an argument.

The following command will list private keys currently accessible to the agent:

```
ssh-add -l
```
